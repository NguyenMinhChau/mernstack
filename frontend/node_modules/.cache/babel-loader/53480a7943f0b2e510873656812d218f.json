{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext,useState}from'react';import axios from'axios';import'./PostCreate.css';import{AppContext,actionpayloads}from'../../exportStore';import{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostCreate=function PostCreate(){var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],seterrorMessage=_useState4[1];var onChangeHandler=function onChangeHandler(e){setPosts(e.target.value);};var onSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var token,option,response,postsCreate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();token=localStorage.getItem('token');option={method:'POST',url:'api/v1/posts/create',headers:{'Authorization':\"Bearer \".concat(token)},data:{content:posts}};_context.next=6;return axios(option);case 6:response=_context.sent;postsCreate=response.data.data;dispatch(actionpayloads.createOnePost(postsCreate));window.location.reload();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);seterrorMessage(_context.t0.response.data.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function onSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:state.user&&/*#__PURE__*/_jsx(\"div\",{class:\"container-p15 mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"form\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage?\"Error: \".concat(errorMessage):''})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"content\",name:\"content\",rows:\"3\",placeholder:\"What's happening?\",onChange:onChangeHandler,value:posts})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group text-right\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-custom\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fab fa-twitter\",style:{color:\"#25dbf6\"}}),\" Tweet\"]})})]})})});};export default PostCreate;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/components/PostCreate/PostCreate.js"],"names":["useContext","useState","axios","AppContext","actionpayloads","CKEditor","ClassicEditor","PostCreate","state","dispatch","posts","setPosts","errorMessage","seterrorMessage","onChangeHandler","e","target","value","onSubmitHandler","preventDefault","token","localStorage","getItem","option","method","url","headers","data","content","response","postsCreate","createOnePost","window","location","reload","message","user","color"],"mappings":"icAAA,OAAQA,UAAR,CAAoBC,QAApB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,CACA,OAASC,UAAT,CAAsBC,cAAtB,KAA2C,mBAA3C,CACA,OAASC,QAAT,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,C,6IAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,gBAA0BP,UAAU,CAACG,UAAD,CAApC,CAAOK,KAAP,aAAOA,KAAP,CAAcC,QAAd,aAAcA,QAAd,CACA,cAA0BR,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,eAAwCV,QAAQ,CAAC,EAAD,CAAhD,yCAAOW,YAAP,eAAqBC,eAArB,eAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,CAAD,CAAO,CAC3BJ,QAAQ,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CACH,CAFD,CAGA,GAAMC,CAAAA,eAAe,0FAAG,iBAAOH,CAAP,wKAEhBA,CAAC,CAACI,cAAF,GACMC,KAHU,CAGFC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHE,CAIVC,MAJU,CAID,CACXC,MAAM,CAAE,MADG,CAEXC,GAAG,CAAE,qBAFM,CAGXC,OAAO,CAAE,CACL,iCAA2BN,KAA3B,CADK,CAHE,CAMXO,IAAI,CAAE,CAACC,OAAO,CAAElB,KAAV,CANK,CAJC,uBAYOR,CAAAA,KAAK,CAACqB,MAAD,CAZZ,QAYVM,QAZU,eAaVC,WAbU,CAaID,QAAQ,CAACF,IAAT,CAAcA,IAblB,CAchBlB,QAAQ,CAACL,cAAc,CAAC2B,aAAf,CAA6BD,WAA7B,CAAD,CAAR,CACAE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAfgB,iFAiBhBrB,eAAe,CAAC,YAAIgB,QAAJ,CAAaF,IAAb,CAAkBQ,OAAnB,CAAf,CAjBgB,qEAAH,kBAAfjB,CAAAA,eAAe,4CAArB,CAoBA,mBACI,yBACKV,KAAK,CAAC4B,IAAN,eACG,YAAK,KAAK,CAAC,oBAAX,uBACI,cAAM,KAAK,CAAC,MAAZ,CAAmB,QAAQ,CAAElB,eAA7B,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,eAAf,UAAgCN,YAAY,kBAAaA,YAAb,EAA8B,EAA1E,EADJ,EADJ,cAII,YAAK,KAAK,CAAC,YAAX,uBACI,iBAAU,SAAS,CAAC,cAApB,CAAmC,EAAE,CAAC,SAAtC,CAAgD,IAAI,CAAC,SAArD,CAA+D,IAAI,CAAC,GAApE,CAAwE,WAAW,CAAC,mBAApF,CAAwG,QAAQ,CAAEE,eAAlH,CAAmI,KAAK,CAAEJ,KAA1I,EADJ,EAJJ,cAOI,YAAK,KAAK,CAAC,uBAAX,uBACI,gBAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,wBACA,UAAG,KAAK,CAAC,gBAAT,CAA0B,KAAK,CAAE,CAAC2B,KAAK,CAAC,SAAP,CAAjC,EADA,YADJ,EAPJ,GADJ,EAFR,EADJ,CAoBH,CAhDD,CAiDA,cAAe9B,CAAAA,UAAf","sourcesContent":["import {useContext, useState} from 'react';\r\nimport axios from 'axios';\r\nimport './PostCreate.css';\r\nimport { AppContext , actionpayloads} from '../../exportStore';\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\n\r\nconst PostCreate = () => {\r\n    const {state, dispatch} = useContext(AppContext);\r\n    const [posts, setPosts] = useState('');\r\n    const [errorMessage, seterrorMessage] = useState('');\r\n\r\n    const onChangeHandler = (e) => {\r\n        setPosts(e.target.value);\r\n    } \r\n    const onSubmitHandler = async (e) => {\r\n        try{\r\n            e.preventDefault();\r\n            const token = localStorage.getItem('token');\r\n            const option = {\r\n                method: 'POST',\r\n                url: 'api/v1/posts/create',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                data: {content: posts}\r\n            }\r\n            const response = await axios(option);\r\n            const postsCreate = response.data.data;\r\n            dispatch(actionpayloads.createOnePost(postsCreate));\r\n            window.location.reload();\r\n        }catch(err){\r\n            seterrorMessage(err.response.data.message);\r\n        }\r\n    }\r\n    return(\r\n        <>\r\n            {state.user &&\r\n                <div class='container-p15 mt-3'>\r\n                    <form class='form' onSubmit={onSubmitHandler}>\r\n                        <div className='form-group'>\r\n                            <div className='error-message'>{errorMessage ? `Error: ${errorMessage}` : ''}</div>\r\n                        </div>\r\n                        <div class='form-group'>\r\n                            <textarea className='form-control' id='content' name='content' rows='3' placeholder=\"What's happening?\" onChange={onChangeHandler} value={posts}/>\r\n                        </div>\r\n                        <div class='form-group text-right'>\r\n                            <button type='submit' className='btn-custom'>\r\n                            <i class=\"fab fa-twitter\" style={{color:\"#25dbf6\"}}></i> Tweet</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default PostCreate;"]},"metadata":{},"sourceType":"module"}