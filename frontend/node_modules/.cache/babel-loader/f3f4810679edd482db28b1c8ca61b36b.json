{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useReducer,useCallback,useEffect}from'react';import{Routes,Route}from'react-router-dom';import axios from'axios';import'./components/index.js';import{Header,Home,Footer,Login,Register,PageNotFound,AppContext,reducer,actionpayloads}from'./exportStore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useReducer=useReducer(reducer,actionpayloads.initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//check current user\nvar checkCurrentUser=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,option,response,username;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem('token');option={method:'GET',url:'/api/v1/users/',headers:{'Authorization':\"Bearer \".concat(token)}};_context.next=5;return axios(option);case 5:response=_context.sent;if(response.data.data.user){username=response.data.data.user.username;dispatch(actionpayloads.currentUser(username));}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[dispatch]);useEffect(function(){checkCurrentUser();},[checkCurrentUser]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{state:state,dispatch:dispatch},children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(PageNotFound,{})})]}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/App.js"],"names":["useReducer","useCallback","useEffect","Routes","Route","axios","Header","Home","Footer","Login","Register","PageNotFound","AppContext","reducer","actionpayloads","App","initialState","state","dispatch","checkCurrentUser","token","localStorage","getItem","option","method","url","headers","response","data","user","username","currentUser","console","log","message"],"mappings":"icAAA,OAAQA,UAAR,CAAoBC,WAApB,CAAiCC,SAAjC,KAAiD,OAAjD,CACA,OAAQC,MAAR,CAAgBC,KAAhB,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,uBAAP,CACA,OAAQC,MAAR,CAAgBC,IAAhB,CAAsBC,MAAtB,CAA8BC,KAA9B,CAAqCC,QAArC,CACQC,YADR,CACsBC,UADtB,CACkCC,OADlC,CAC2CC,cAD3C,KAEO,eAFP,C,wFAIA,QAASC,CAAAA,GAAT,EAAe,CACb,gBAA0Bf,UAAU,CAACa,OAAD,CAAUC,cAAc,CAACE,YAAzB,CAApC,4CAAOC,KAAP,iBAAcC,QAAd,iBACA;AACA,GAAMC,CAAAA,gBAAgB,CAAGlB,WAAW,sEAAC,sLAE3BmB,KAF2B,CAEnBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFmB,CAG3BC,MAH2B,CAGlB,CACbC,MAAM,CAAE,KADK,CAEbC,GAAG,CAAE,gBAFQ,CAGbC,OAAO,CAAE,CACP,iCAA2BN,KAA3B,CADO,CAHI,CAHkB,uBAUVf,CAAAA,KAAK,CAACkB,MAAD,CAVK,QAU3BI,QAV2B,eAWjC,GAAGA,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,IAAtB,CAA2B,CAClBC,QADkB,CACNH,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,IADb,CAClBC,QADkB,CAEzBZ,QAAQ,CAACJ,cAAc,CAACiB,WAAf,CAA2BD,QAA3B,CAAD,CAAR,CACD,CAdgC,+EAgBjCE,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EAhBiC,oEAAD,GAkBlC,CAAChB,QAAD,CAlBkC,CAApC,CAmBAhB,SAAS,CAAC,UAAM,CACdiB,gBAAgB,GACjB,CAFQ,CAEP,CAACA,gBAAD,CAFO,CAAT,CAGA,mBACE,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAE,CAACF,KAAK,CAALA,KAAD,CAAQC,QAAQ,CAARA,QAAR,CAA5B,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,IAAD,IAAzB,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,KAAC,KAAD,IAA9B,EAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,QAAD,IAAjC,EAHF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,YAAD,IAAzB,EAJF,GAFF,cAQE,KAAC,MAAD,IARF,GADF,EADF,CAcD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import {useReducer, useCallback, useEffect} from 'react';\nimport {Routes, Route} from 'react-router-dom'\nimport axios from 'axios';\nimport './components/index.js';\nimport {Header, Home, Footer, Login, Register, \n        PageNotFound, AppContext, reducer, actionpayloads\n} from './exportStore';\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, actionpayloads.initialState);\n  //check current user\n  const checkCurrentUser = useCallback(async () => {\n    try{\n      const token = localStorage.getItem('token');\n      const option = {\n        method: 'GET',\n        url: '/api/v1/users/',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }\n      const response = await axios(option);\n      if(response.data.data.user){\n        const {username} = response.data.data.user;\n        dispatch(actionpayloads.currentUser(username));\n      }\n    }catch(err){\n      console.log(err.message);\n    }\n  },[dispatch]);\n  useEffect(() => {\n    checkCurrentUser()\n  },[checkCurrentUser]);\n  return (\n    <AppContext.Provider value={{state, dispatch}}>\n      <div className=\"app\">\n        <Header/>\n        <Routes>\n          <Route path=\"/\" element={<Home/>}/>\n          <Route path=\"/login\" element={<Login/>}/>\n          <Route path=\"/register\" element={<Register/>}/>\n          <Route path=\"*\" element={<PageNotFound/>}/>\n        </Routes>\n        <Footer/>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}