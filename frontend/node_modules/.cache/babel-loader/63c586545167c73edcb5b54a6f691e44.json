{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _defineProperty from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useContext}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./Register.css';import{AppContext,getCurrentUser}from'../../exportStore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(){var _useContext=useContext(AppContext),dispatch=_useContext.dispatch;var _useState=useState({username:'',email:'',password:''}),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var history=useNavigate();var onChangeHandler=function onChangeHandler(event){setUserInput(_objectSpread(_objectSpread({},userInput),{},_defineProperty({},event.target.name,event.target.value)));};var onSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var option,response,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();option={method:'POST',url:'api/v1/users/register',data:userInput};_context.next=5;return axios(option);case 5:response=_context.sent;token=response.data.data.token;localStorage.setItem('token',token);dispatch(getCurrentUser(response.data.data.user.username));history('/');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setErrorMessage(_context.t0.response.data.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function onSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"register d-flex flex-justify-center w-100 mt-5 mb-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-register text-center\",autoComplete:\"off\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h5\",{className:\"form-register-text text-bold mt-2 mb-3\",children:\"Register Account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[errorMessage&&Array.isArray(errorMessage)?errorMessage.map(function(err,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[\"Error: \",err]},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage?\"Error: \".concat(errorMessage):''}),/*#__PURE__*/_jsx(\"div\",{className:\"error-message\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",name:\"username\",placeholder:\"Name\",value:userInput.username,onChange:onChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control mt-4\",id:\"email\",name:\"email\",placeholder:\"Email\",value:userInput.email,onChange:onChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mt-4\",id:\"password\",name:\"password\",placeholder:\"Password\",value:userInput.password,onChange:onChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-custom mt-2 w-100\",children:\"Register\"})})]})})});};export default Register;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/components/Register/Register.js"],"names":["useState","useContext","axios","useNavigate","AppContext","getCurrentUser","Register","dispatch","username","email","password","userInput","setUserInput","errorMessage","setErrorMessage","history","onChangeHandler","event","target","name","value","onSubmitHandler","preventDefault","option","method","url","data","response","token","localStorage","setItem","user","message","Array","isArray","map","err","index"],"mappings":"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","sourcesContent":["import {useState, useContext} from 'react';\r\nimport axios from 'axios';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport './Register.css';\r\nimport { AppContext, getCurrentUser } from '../../exportStore';\r\n\r\nconst Register = () => {\r\n    const {dispatch} = useContext(AppContext);\r\n    const [userInput, setUserInput] = useState({username: '', email: '', password: ''});\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n    const history = useNavigate();\r\n    const onChangeHandler = (event) => {\r\n        setUserInput({...userInput, [event.target.name]: event.target.value});\r\n    }\r\n    const onSubmitHandler = async (event) => {\r\n        try{\r\n            event.preventDefault();\r\n            const option = {\r\n                method: 'POST',\r\n                url: 'api/v1/users/register',\r\n                data: userInput\r\n            }\r\n            const response = await axios(option);\r\n            const token = response.data.data.token;\r\n            localStorage.setItem('token', token);\r\n            dispatch(getCurrentUser(response.data.data.user.username));\r\n            history('/');\r\n        }catch(err){    \r\n            setErrorMessage(err.response.data.message);\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <div className='register d-flex flex-justify-center w-100 mt-5 mb-5'>\r\n                <form className='form-register text-center' autoComplete='off' onSubmit={onSubmitHandler}>\r\n                    <h5 className='form-register-text text-bold mt-2 mb-3'>Register Account</h5>\r\n                    <div className='form-group'>\r\n                        {errorMessage && \r\n                            Array.isArray(errorMessage) ?\r\n                            errorMessage.map((err, index) => {\r\n                                return <div key={index} className='error-message'>Error: {err}</div>\r\n                            }) : \r\n                            <div className='error-message'>{errorMessage ? `Error: ${errorMessage}` : ''}</div>\r\n                        }\r\n                        <div className='error-message'></div>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='text' className='form-control' id='username' name='username' placeholder='Name' value={userInput.username} onChange={onChangeHandler}/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='email' className='form-control mt-4' id='email' name='email' placeholder='Email'value={userInput.email} onChange={onChangeHandler}/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='password' className='form-control mt-4' id='password' name='password' placeholder='Password' value={userInput.password} onChange={onChangeHandler}/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <button className='btn-custom mt-2 w-100'>Register</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}