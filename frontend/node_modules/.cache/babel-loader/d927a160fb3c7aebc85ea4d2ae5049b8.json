{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Routes,Route}from'react-router-dom';import{useCallback,useEffect,useReducer}from'react';import{Header,Footer,Login,Register,Main,NotFound,AppContext,reducer,initialState,getCurrentUser}from'../src/exportStore';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//checkCurrentUser\nvar checkCurrentUser=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,option,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem('token');option={method:'GET',url:'api/v1/users',headers:{'Authorization':\"Bearer \".concat(token)}};_context.next=5;return axios(option);case 5:response=_context.sent;if(response.data.data.user){dispatch(getCurrentUser(response.data.data.user.username));}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[dispatch]);useEffect(function(){checkCurrentUser();},[checkCurrentUser]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{state:state,dispatch:dispatch},children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Main,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/App.js"],"names":["Routes","Route","useCallback","useEffect","useReducer","Header","Footer","Login","Register","Main","NotFound","AppContext","reducer","initialState","getCurrentUser","axios","App","state","dispatch","checkCurrentUser","token","localStorage","getItem","option","method","url","headers","response","data","user","username","console","log"],"mappings":"icAAA,OAAQA,MAAR,CAAgBC,KAAhB,KAA4B,kBAA5B,CACA,OAAQC,WAAR,CAAqBC,SAArB,CAAgCC,UAAhC,KAAiD,OAAjD,CACA,OAAQC,MAAR,CAAgBC,MAAhB,CAAwBC,KAAxB,CAA+BC,QAA/B,CAAyCC,IAAzC,CAA+CC,QAA/C,CAAyDC,UAAzD,CAAqEC,OAArE,CAA8EC,YAA9E,CAA4FC,cAA5F,KAAiH,oBAAjH,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,gBAA0BZ,UAAU,CAACQ,OAAD,CAAUC,YAAV,CAApC,4CAAOI,KAAP,iBAAcC,QAAd,iBACA;AACA,GAAMC,CAAAA,gBAAgB,CAAGjB,WAAW,sEAAC,6KAE3BkB,KAF2B,CAEnBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFmB,CAG3BC,MAH2B,CAGlB,CACbC,MAAM,CAAE,KADK,CAEbC,GAAG,CAAE,cAFQ,CAGbC,OAAO,CAAE,CACP,iCAA2BN,KAA3B,CADO,CAHI,CAHkB,uBAUVL,CAAAA,KAAK,CAACQ,MAAD,CAVK,QAU3BI,QAV2B,eAWjC,GAAGA,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,IAAtB,CAA2B,CACzBX,QAAQ,CAACJ,cAAc,CAACa,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,IAAnB,CAAwBC,QAAzB,CAAf,CAAR,CACD,CAbgC,+EAejCC,OAAO,CAACC,GAAR,cAfiC,oEAAD,GAiBlC,CAACd,QAAD,CAjBkC,CAApC,CAkBAf,SAAS,CAAC,UAAM,CACdgB,gBAAgB,GACjB,CAFQ,CAEP,CAACA,gBAAD,CAFO,CAAT,CAIA,mBACE,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAE,CAACF,KAAK,CAALA,KAAD,CAAOC,QAAQ,CAARA,QAAP,CAA5B,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,IAAD,IAAzB,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,KAAC,KAAD,IAA9B,EAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,QAAD,IAAjC,EAHF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,QAAD,IAAzB,EAJF,GAFF,cAQE,KAAC,MAAD,IARF,GADF,EADF,CAcD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["import {Routes, Route} from 'react-router-dom';\nimport {useCallback, useEffect, useReducer} from 'react';\nimport {Header, Footer, Login, Register, Main, NotFound, AppContext, reducer, initialState, getCurrentUser} from '../src/exportStore';\nimport axios from 'axios';\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  //checkCurrentUser\n  const checkCurrentUser = useCallback(async () => {\n    try{\n      const token = localStorage.getItem('token');\n      const option = {\n        method: 'GET',\n        url: 'api/v1/users',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }\n      const response = await axios(option);\n      if(response.data.data.user){\n        dispatch(getCurrentUser(response.data.data.user.username));\n      }\n    }catch(err){\n      console.log(err);\n    }\n  },[dispatch])\n  useEffect(() => {\n    checkCurrentUser();\n  },[checkCurrentUser]);\n\n  return (\n    <AppContext.Provider value={{state,dispatch}}>\n      <div className=\"app\">\n        <Header/>\n        <Routes>\n          <Route path=\"/\" element={<Main/>}/>\n          <Route path=\"/login\" element={<Login/>}/>\n          <Route path=\"/register\" element={<Register/>}/>\n          <Route path=\"*\" element={<NotFound/>}/>\n        </Routes>\n        <Footer/>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}