{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _defineProperty from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useContext}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{AppContext,getCurrentUser}from'../../exportStore';import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(AppContext),dispatch=_useContext.dispatch;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var history=useNavigate();var onChangeHandler=function onChangeHandler(event){setUserInput(_objectSpread(_objectSpread({},userInput),{},_defineProperty({},event.target.name,event.target.value)));};var onSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var option,response,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();option={method:'POST',url:'api/v1/users/login',data:userInput};_context.next=5;return axios(option);case 5:response=_context.sent;token=response.data.data.token;localStorage.setItem('token',token);dispatch(getCurrentUser(response.data.data.user.username));history('/');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setErrorMessage(_context.t0.response.data.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function onSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"login d-flex flex-justify-center w-100 mt-5 mb-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-login text-center\",autoComplete:\"off\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h5\",{className:\"form-login-text text-bold mt-2 mb-3\",children:\"Enter Account\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage?\"Error: \".concat(errorMessage):''})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",placeholder:\"Email\",value:userInput.email,onChange:onChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mt-4\",id:\"password\",name:\"password\",placeholder:\"Password\",value:userInput.password,onChange:onChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-custom mt-2 w-100\",children:\"Login\"})})]})})});};export default Login;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/components/Login/Login.js"],"names":["useState","useContext","axios","useNavigate","AppContext","getCurrentUser","Login","dispatch","email","password","userInput","setUserInput","errorMessage","setErrorMessage","history","onChangeHandler","event","target","name","value","onSubmitHandler","preventDefault","option","method","url","data","response","token","localStorage","setItem","user","username","message"],"mappings":"4uBAAA,OAAQA,QAAR,CAAkBC,UAAlB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,CACA,OAASC,UAAT,CAAqBC,cAArB,KAA2C,mBAA3C,CACA,MAAO,aAAP,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAChB,gBAAmBL,UAAU,CAACG,UAAD,CAA7B,CAAOG,QAAP,aAAOA,QAAP,CACA,cAAkCP,QAAQ,CAAC,CAACQ,KAAK,CAAE,EAAR,CAAYC,QAAQ,CAAE,EAAtB,CAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eACA,eAAwCX,QAAQ,CAAC,IAAD,CAAhD,yCAAOY,YAAP,eAAqBC,eAArB,eACA,GAAMC,CAAAA,OAAO,CAAGX,WAAW,EAA3B,CACA,GAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CAC/BL,YAAY,gCAAKD,SAAL,wBAAiBM,KAAK,CAACC,MAAN,CAAaC,IAA9B,CAAqCF,KAAK,CAACC,MAAN,CAAaE,KAAlD,GAAZ,CACH,CAFD,CAGA,GAAMC,CAAAA,eAAe,0FAAG,iBAAOJ,KAAP,4JAEhBA,KAAK,CAACK,cAAN,GACMC,MAHU,CAGD,CACXC,MAAM,CAAE,MADG,CAEXC,GAAG,CAAE,oBAFM,CAGXC,IAAI,CAAEf,SAHK,CAHC,uBAQOR,CAAAA,KAAK,CAACoB,MAAD,CARZ,QAQVI,QARU,eASVC,KATU,CASFD,QAAQ,CAACD,IAAT,CAAcA,IAAd,CAAmBE,KATjB,CAUhBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACApB,QAAQ,CAACF,cAAc,CAACqB,QAAQ,CAACD,IAAT,CAAcA,IAAd,CAAmBK,IAAnB,CAAwBC,QAAzB,CAAf,CAAR,CACAjB,OAAO,CAAC,GAAD,CAAP,CAZgB,iFAchBD,eAAe,CAAC,YAAIa,QAAJ,CAAaD,IAAb,CAAkBO,OAAnB,CAAf,CAdgB,qEAAH,kBAAfZ,CAAAA,eAAe,4CAArB,CAiBA,mBACI,sCACI,YAAK,SAAS,CAAC,kDAAf,uBACI,cAAM,SAAS,CAAC,wBAAhB,CAAyC,YAAY,CAAC,KAAtD,CAA4D,QAAQ,CAAEA,eAAtE,wBACI,WAAI,SAAS,CAAC,qCAAd,2BADJ,cAEI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,eAAf,UAAgCR,YAAY,kBAAaA,YAAb,EAA8B,EAA1E,EADJ,EAFJ,cAKI,YAAK,SAAS,CAAC,YAAf,uBACI,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,OAAhD,CAAwD,IAAI,CAAC,OAA7D,CAAqE,WAAW,CAAC,OAAjF,CAAyF,KAAK,CAAEF,SAAS,CAACF,KAA1G,CAAiH,QAAQ,CAAEO,eAA3H,EADJ,EALJ,cAQI,YAAK,SAAS,CAAC,YAAf,uBACI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,mBAAjC,CAAqD,EAAE,CAAC,UAAxD,CAAmE,IAAI,CAAC,UAAxE,CAAmF,WAAW,CAAC,UAA/F,CAA0G,KAAK,CAAEL,SAAS,CAACD,QAA3H,CAAqI,QAAQ,CAAEM,eAA/I,EADJ,EARJ,cAWI,YAAK,SAAS,CAAC,YAAf,uBACI,eAAQ,SAAS,CAAC,uBAAlB,mBADJ,EAXJ,GADJ,EADJ,EADJ,CAqBH,CA9CD,CA+CA,cAAeT,CAAAA,KAAf","sourcesContent":["import {useState, useContext} from 'react';\r\nimport axios from 'axios';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport { AppContext, getCurrentUser } from '../../exportStore';\r\nimport './Login.css';\r\n\r\nconst Login = () => {\r\n    const {dispatch} = useContext(AppContext);\r\n    const [userInput, setUserInput] = useState({email: '', password: ''});\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n    const history = useNavigate();\r\n    const onChangeHandler = (event) => {\r\n        setUserInput({...userInput, [event.target.name]: event.target.value});\r\n    }\r\n    const onSubmitHandler = async (event) => {\r\n        try{\r\n            event.preventDefault();\r\n            const option = {\r\n                method: 'POST',\r\n                url: 'api/v1/users/login',\r\n                data: userInput\r\n            }\r\n            const response = await axios(option);\r\n            const token = response.data.data.token;\r\n            localStorage.setItem('token', token);\r\n            dispatch(getCurrentUser(response.data.data.user.username));\r\n            history('/');\r\n        }catch(err){    \r\n            setErrorMessage(err.response.data.message);\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <div className='login d-flex flex-justify-center w-100 mt-5 mb-5'>\r\n                <form className='form-login text-center' autoComplete='off' onSubmit={onSubmitHandler}>\r\n                    <h5 className='form-login-text text-bold mt-2 mb-3'>Enter Account</h5>\r\n                    <div className='form-group'>\r\n                        <div className='error-message'>{errorMessage ? `Error: ${errorMessage}` : ''}</div>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='email' className='form-control' id='email' name='email' placeholder='Email' value={userInput.email} onChange={onChangeHandler}/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='password' className='form-control mt-4' id='password' name='password' placeholder='Password' value={userInput.password} onChange={onChangeHandler}/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <button className='btn-custom mt-2 w-100'>Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}