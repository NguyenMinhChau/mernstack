{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Workspace\\\\mongodb_expressjs_reactjs_nodejs\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import{useContext,useState}from'react';import{AppContext,createOnePost}from'../../../exportStore';import'./PostCreateForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostCreateForm=function PostCreateForm(){var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),postInput=_useState2[0],setPostInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var onSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var token,option,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();token=localStorage.getItem('token');option={method:'POST',url:'api/v1/posts/create',headers:{'Authorization':\"Bearer \".concat(token)},data:{content:postInput}};_context.next=6;return axios(option);case 6:response=_context.sent;dispatch(createOnePost(response.data.data));window.location.reload();_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setErrorMessage(_context.t0.response.data.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function onSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:state.user&&/*#__PURE__*/_jsx(\"div\",{className:\"pd-rt-15 mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"from-create-post\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage?\"Error: \".concat(errorMessage):''})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"content\",name:\"content\",rows:\"5\",placeholder:\"What's happening?\",value:postInput,onChange:function onChange(e){setPostInput(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group d-flex\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-custom ml-auto\",type:\"submit\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-twitter\",style:{color:\"#22ddd9\"}}),\" Tweet\"]})})]})})});};export default PostCreateForm;","map":{"version":3,"sources":["E:/Workspace/mongodb_expressjs_reactjs_nodejs/frontend/src/components/Posts/PostCreateForm/PostCreateForm.js"],"names":["axios","useContext","useState","AppContext","createOnePost","PostCreateForm","state","dispatch","postInput","setPostInput","errorMessage","setErrorMessage","onSubmitHandler","e","preventDefault","token","localStorage","getItem","option","method","url","headers","data","content","response","window","location","reload","message","user","target","value","color"],"mappings":"icAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OAASC,UAAT,CAAqBC,aAArB,KAA0C,sBAA1C,CACA,MAAO,sBAAP,C,6IAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,gBAA0BJ,UAAU,CAACE,UAAD,CAApC,CAAOG,KAAP,aAAOA,KAAP,CAAcC,QAAd,aAAcA,QAAd,CACA,cAAkCL,QAAQ,CAAC,EAAD,CAA1C,wCAAOM,SAAP,eAAkBC,YAAlB,eACA,eAAwCP,QAAQ,CAAC,IAAD,CAAhD,yCAAOQ,YAAP,eAAqBC,eAArB,eACA,GAAMC,CAAAA,eAAe,0FAAG,iBAAOC,CAAP,4JAEhBA,CAAC,CAACC,cAAF,GACMC,KAHU,CAGFC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHE,CAIVC,MAJU,CAID,CACXC,MAAM,CAAE,MADG,CAEXC,GAAG,CAAE,qBAFM,CAGXC,OAAO,CAAE,CACL,iCAA2BN,KAA3B,CADK,CAHE,CAMXO,IAAI,CAAE,CAACC,OAAO,CAAEf,SAAV,CANK,CAJC,uBAYOR,CAAAA,KAAK,CAACkB,MAAD,CAZZ,QAYVM,QAZU,eAahBjB,QAAQ,CAACH,aAAa,CAACoB,QAAQ,CAACF,IAAT,CAAcA,IAAf,CAAd,CAAR,CACAG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAdgB,iFAgBhBhB,eAAe,CAAC,YAAIa,QAAJ,CAAaF,IAAb,CAAkBM,OAAnB,CAAf,CAhBgB,qEAAH,kBAAfhB,CAAAA,eAAe,4CAArB,CAmBA,mBACI,yBACKN,KAAK,CAACuB,IAAN,eACG,YAAK,SAAS,CAAC,eAAf,uBACI,cAAM,SAAS,CAAC,kBAAhB,CAAmC,QAAQ,CAAEjB,eAA7C,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,eAAf,UAAgCF,YAAY,kBAAaA,YAAb,EAA8B,EAA1E,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,YAAf,uBACI,iBAAU,SAAS,CAAC,cAApB,CAAmC,EAAE,CAAC,SAAtC,CAAgD,IAAI,CAAC,SAArD,CAA+D,IAAI,CAAC,GAApE,CAAwE,WAAW,CAAC,mBAApF,CAAwG,KAAK,CAAEF,SAA/G,CAA0H,QAAQ,CAAE,kBAACK,CAAD,CAAM,CAACJ,YAAY,CAACI,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAZ,CAA6B,CAAxK,EADJ,EAJJ,cAOI,YAAK,SAAS,CAAC,mBAAf,uBACI,gBAAQ,SAAS,CAAC,oBAAlB,CAAuC,IAAI,CAAC,QAA5C,wBACI,UAAG,SAAS,CAAC,gBAAb,CAA8B,KAAK,CAAE,CAACC,KAAK,CAAE,SAAR,CAArC,EADJ,YADJ,EAPJ,GADJ,EAFR,EADJ,CAoBH,CA3CD,CA4CA,cAAe3B,CAAAA,cAAf","sourcesContent":["import axios from 'axios';\r\nimport { useContext, useState } from 'react';\r\nimport { AppContext, createOnePost } from '../../../exportStore';\r\nimport './PostCreateForm.css';\r\n\r\nconst PostCreateForm = () => {\r\n    const {state, dispatch} = useContext(AppContext);\r\n    const [postInput, setPostInput] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n    const onSubmitHandler = async (e) => {\r\n        try{\r\n            e.preventDefault();\r\n            const token = localStorage.getItem('token');\r\n            const option = {\r\n                method: 'POST',\r\n                url: 'api/v1/posts/create',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n                data: {content: postInput}\r\n            }\r\n            const response = await axios(option);\r\n            dispatch(createOnePost(response.data.data));\r\n            window.location.reload();\r\n        }catch(err){\r\n            setErrorMessage(err.response.data.message);\r\n        }   \r\n    }\r\n    return (\r\n        <>\r\n            {state.user &&\r\n                <div className='pd-rt-15 mt-3'>\r\n                    <form className='from-create-post' onSubmit={onSubmitHandler}>\r\n                        <div className='form-group'>\r\n                            <div className='error-message'>{errorMessage ? `Error: ${errorMessage}` : ''}</div>\r\n                        </div>\r\n                        <div className='form-group'>\r\n                            <textarea className='form-control' id='content' name='content' rows='5' placeholder=\"What's happening?\" value={postInput} onChange={(e)=> {setPostInput(e.target.value)}}/ >\r\n                        </div>\r\n                        <div className='form-group d-flex'>\r\n                            <button className='btn-custom ml-auto' type='submit'>\r\n                                <i className=\"fab fa-twitter\" style={{color: \"#22ddd9\"}}></i> Tweet</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default PostCreateForm;"]},"metadata":{},"sourceType":"module"}